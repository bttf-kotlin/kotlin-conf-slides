// Theme
:revealjs_customtheme: css/theme/bttf.css

:revealjs_slideNumber: true
//:revealjsdir: https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0

//:revealjs_width: "100%"
//:revealjs_height: "100%"
//:revealjs_margin: 0
//:revealjs_minScale: 1
//:revealjs_maxScale: 1

:source-highlighter: highlightjs
// :highlightjsdir: highlightjs
// :highlightjs-theme: "tomorrow-night-blue"


:imagesdir: images
:title-slide-transition: zoom
:title-slide-transition-speed: fast


= KOTLIN < : > le back du futur

[NOTE.speaker]
--
M: Doc ? Doc ? Vous √™tes o√π ?

_Marty recherche Doc et avance au slide suivant_ :D
--

== PREVIOUSLY&nbsp;ON&nbsp;BREIZHCAMP

[actor-role]#Doc# est parti quelques ann√©es dans le pass√© pour comprendre comment on d√©veloppait des applications `Java`.

[NOTE.speaker]
--
D: Martyyy, tu tombes bien! Je reviens du pass√© et j'ai d√©couvert quelquechose d'horrible.
Malgr√© les efforts de nombreuses personnes, la plateforme cfp.io est vou√©e √† dispara√Ætre.

M: Mais Doc c'est pas justement l√† que l'on a post√© notre conf√©rence pour le BreizhCamp.

D: Si Marty, mais des gens bien intentionn√© ont pr√©f√©r√© l'abandonner car il manque des fonctionnalit√©s et il y a des bugs.

M: Mais pourquoi n'ont elle pas √©t√© ajout√©es ? La plateforme est open source, non ?

D: Vient Marty, je te montre.
--

== IN THE PAST OF CFP.IO


[source,bash]
----
commit cfc41bb48e4fc66dd2bf04588e24f590147cef45
Author: Nicolas De Loof <nicolas.deloof@gmail.com>
Date:   Tue Apr 25 16:24:44 2017 +0200

    ah le code legacy,
    m√™me pas foutu de respected la norme javabean :-\

commit 771136b238f375edf44c092c8c37b6014919e6cf
Author: Nicolas De Loof <nicolas.deloof@gmail.com>
Date:   Wed Mar 8 19:15:11 2017 +0100

    java Date API sucks

commit 2b67097a80dc5e970b12665924ebc73b751adc10
Merge: f9fcc1b9 5b11b30d
Author: Marc <marc.audefroy@ovh.fr>
Date:   Tue Dec 8 18:27:06 2015 +0100

    Merge branch 'cospeakers'   Note du dev : GRRRRRRR

    Conflicts:
            src/main/java/fr/sii/controller/restricted/session/SessionController.java
            src/main/java/fr/sii/dto/TalkUser.java
            src/main/java/fr/sii/dto/mapping/TalkMapping.java
            src/main/java/fr/sii/service/TalkUserService.java
            src/main/resources/changelog/changelog-1.0.xml
            src/main/static/app/scripts/controllers/restricted/talks/edit.js

commit dc41801e45d6c1c23b17325eafe712824808e9be
Author: Nicolas De Loof <nicolas.deloof@gmail.com>
Date:   Sat Nov 7 14:33:42 2015 +0100

    can‚Äôt run with java 8

----



[NOTE.speaker]
--
M: Heu... Doc ? C'est moi o√π c'est du Java.

D: Tu sais Marty, √† l'√©poque il n'y avait pas trop de choix.

M: On pourrait pas utiliser Kotlin pour rajouter du code ?

D: Nom de Zeus, tu as raison Marty. Kotlin, c'est le back du futur.
--

== KOTLIN LE BACK DU FUTUR <

== STARRING

image::adrien.png[size=contain, role="actor"]

Adrien Pessu as [.actor-role]#Marty#


Freelance

üê¶ @adrien_pe

== AND

image::gautier.png[size=contain, role="actor"]

Gautier de Saint Martin Lacaze as [actor-role]#Doc#

Freelance & Nantes JUG Leader

üê¶ @darkjabberwock

== LES BASES DE LA SYNTAXE

[transition=fade]
=== VAL VS VAR
[source,kotlin,subs="quotes"]
----
val name: String = "adrien"



//
----

[transition=fade]
=== VAL VS VAR
[source,kotlin,subs="quotes"]
----
val name: String = "adrien"

var comment: String = """ Ceci
|est
|un commentaire √©crit par  ${name}"""
----

=== D√âCLARATION FONCTIONS

[source,kotlin,subs="quotes"]
----
fun myName(nom: String, prenom: String) : String =
  "${nom} ${prenom}"
----

=== LAMBDA / IT
[source,kotlin,subs="quotes"]
----
strings
  .filter { it.length == 5 }
  .sortedBy { it }
  .map { it.toUpperCase() }
----

=== CLASS
[source,kotlin,subs="quotes"]
----
class UserServices(val name: String, val age: Int) {
  var credentials: Credentials;
  fun getUsers()...
}
----

=== OBJECT CLASS
[source,kotlin,subs="quotes"]
----
object class MySingleton
----

[NOTE.speaker]
--
Pas de constructeur
--

=== DATA CLASS
[source,kotlin,subs="quotes"]
----
data class User(val name: String, val age: Int)
----

== FLOW CONTROL

[source,kotlin,subs="quotes"]
----
val city = user?.adress?
  .city ?: throw IllegalArgumentException("Invalid User")
----

[source,kotlin,subs="quotes"]
----
findOrder()?.let { dun(it.customer) }
----

=== PARAMETRE FACULTATIF
[source,kotlin,subs="quotes"]
----
fun printHello(name: String?): Unit {
  if (name != null)
    println("Hello ${name}")
  else
   println("Hi there!")
}
----

=== VALEUR PAR D√âFAUT
[source,kotlin,subs="quotes"]
----
fun read(b: Array<Byte>, off: Int = 0, len: Int = b.size) {
...
}
----

=== BREAK LABEL
[source,kotlin,subs="quotes"]
----
loop@ for (i in 1..100) {
    for (j in 1..100) {
        if (...) break@loop
    }
}
----

=== RETURN LABEL
[source,kotlin,subs="quotes"]
----
fun foo() {
    listOf(1, 2, 3, 4, 5).forEach {
        if (it == 3) return // non-local return directly to the caller of foo()
        print(it)
    }
    println("this point is unreachable")
}

fun foo() {
    listOf(1, 2, 3, 4, 5).forEach lit@{
        if (it == 3) return@lit
        print(it)
    }
    print(" done with explicit label")
}
----

=== RETURN AS LABEL
[source,kotlin,subs="quotes"]
----
people.copy(age = 32)
----


=== IF

[source,kotlin,subs="quotes"]
----
val max = if (a > b) {
  print("Choose a")
  a
} else {
  print("Choose b")
  b
}
----

=== WHEN
[source,kotlin,subs="quotes"]
----
when (x) {
  1 -> print("x == 1")
  2 -> print("x == 2")
  3, 4 -> print("x == 3 or 4")
  else -> { // Note the block
    print("x is neither 1 nor 2")
  }
}
----

=== TRY CATCH
[source,kotlin,subs="quotes"]
----
val a: Int = try {
  parseInt(input)
}
catch (e: NumberFormatException) {
  42
}
----

=== PROGRAMMATION FONCTIONNELLE

[source,kotlin,subs="quotes"]
----
fun <T> lock(lock: Lock, body: () -> T): T {
  lock.lock()
  try {
      return body()
  }
  finally {
      lock.unlock()
  }
}
----

[NOTE.speaker]
--
Pas de Either par default / mais il existe Arrow
--

=== COROUTINE

[source,kotlin,subs="quotes"]
----
val c = AtomicInteger()

for (i in 1..1_000_000)
  thread(start = true) {
    c.addAndGet(i)
  }

println(c.get())
----

[NOTE.speaker]
--
Thread / Async / Il existe aussi RxKotlin
--

=== EXTENSIONS
[source,kotlin,subs="quotes"]
----
class Hero {
  fun useSuperpowers() {
    println("Applied super powers")
  }
}

fun Hero.savePlanet() {
  useSuperpowers()
}

val superman = Hero()
superman.savePlanet()
----

[NOTE.speaker]
--

C#

--

=== KOTLIN STANDARD LIBRARY

[source,kotlin,subs="quotes"]
----
"test".isNotBlank()
----

=== COMPANION

[source, kotlin]
----
class User private constructor(val login: String) {
    companion object UserFactory {
        fun create(login: String): User {
            return User(login)
        }
    }
}
----

== KOTLIN IN THE REAL WORLD

=== JAVA ET KOTLIN

[NOTE.speaker]
--

On peut aussi utiliser l'h√©ritage, les impl√©mentations, ... tout ce qu'il y a dans Java

Hebergement facile

Ce qui vient de Java est nullable

Les types primitifs sont des objets

--

== KOTLIN ET LES FRAMEWORKS

* Spring Boot + JUnit 5
* jackson-kotlin
* kTor
* Javalin
* Kotlin arrow
* Jhipster-kotlin

== KOTLIN MULTIPLATEFORME

* JVM
* JS
* Natif

== THANKS

Any Question ?
