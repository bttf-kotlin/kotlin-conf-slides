// Theme
:revealjs_customtheme: css/theme/bttf.css

:revealjs_slideNumber: true
//:revealjsdir: https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0
:imagesdir: images
:title-slide-transition: zoom
:title-slide-transition-speed: fast


= KOTLIN < : > le back du futur

[NOTE.speaker]
--
M: Doc ? Doc ? Vous √™tes o√π ?

_Marty recherche Doc et avance au slide suivant_ :D
--

== PREVIOUSLY ON BREIZHCAMP

[actor-role]#Doc# est parti quelques ann√©es dans le pass√© pour comprendre comment on d√©veloppait des applications `Java`.

[NOTE.speaker]
--
D: Martyyy, tu tombes bien! Je reviens du pass√© et j'ai d√©couvert quelquechose d'horrible.
Malgr√© les efforts de nombreuses personnes, la plateforme cfp.io est vou√©e √† dispara√Ætre.

M: Mais Doc c'est pas justement l√† que l'on a post√© notre conf√©rence pour le BreizhCamp.

D: Si Marty, mais des gens bien intentionn√© ont pr√©f√©r√© l'abandonner car il manque des fonctionnalit√©s et il y a des bugs.

M: Mais pourquoi n'ont elle pas √©t√© ajout√©es ? La plateforme est open source, non ?

D: Vient Marty, je te montre.
--

== IN THE PAST OF CFP.IO

* Doc et Marty vont dans le pass√© : `git log`
* Ils d√©couvrent que le cfp est fait en Java et donc est tr√®s verbeux
* Ils proposent d'utiliser Kotlin

[NOTE.speaker]
--
M: Heu... Doc ? C'est moi o√π c'est du Java.

D: Tu sais Marty, √† l'√©poque il n'y avait pas trop de choix.

M: On pourrait pas utiliser Kotlin pour rajouter du code ?

D: Nom de Zeus, tu as raison Marty. Kotlin, c'est le back du futur.
--

== KOTLIN LE BACK DU FUTUR <

== STARRING

image::adrien.png[size=contain, role="actor"]

Adrien Pessu as [.actor-role]#Marty#


Freelance

üê¶ @adrien_pe

== AND

image::gautier.png[size=contain, role="actor"]

Gautier de Saint Martin Lacaze as [actor-role]#Doc#

Freelance & Nantes JUG Leader

üê¶ @darkjabberwock

== LES BASES DE LA SYNTAXE

=== VAL VS VAR
[source,kotlin,subs="quotes"]
----
val name: String = "adrien"

var comment: String = """ Ceci
|est
|un commentaire √©crit par  ${name}"""
----
=== D√©claration fonctions

[source,kotlin,subs="quotes"]
----
fun myName(nom: String, prenom: String) : String =
  "${nom} ${prenom}"
----

=== lambda / It
[source,kotlin,subs="quotes"]
----
strings
  .filter { it.length == 5 }
  .sortedBy { it }
  .map { it.toUpperCase() }
----

=== class
[source,kotlin,subs="quotes"]
----
class UserServices(val name: String, val age: Int) {
  var credentials: Credentials;
  fun getUsers()...
}
----

=== Object class
[source,kotlin,subs="quotes"]
----
object class MySingleton
----

[NOTE.speaker]
--
Pas de constructeur
--

=== Data class
[source,kotlin,subs="quotes"]
----
data class User(val name: String, val age: Int)
----

== FLOW CONTROL

[source,kotlin,subs="quotes"]
----
val city = user?.adress?
  .city ?: throw IllegalArgumentException("Invalid User")
----

[source,kotlin,subs="quotes"]
----
findOrder()?.let { dun(it.customer) }
----

=== Param√®tre facultatif
[source,kotlin,subs="quotes"]
----
fun printHello(name: String?): Unit {
  if (name != null)
    println("Hello ${name}")
  else
   println("Hi there!")
}
----
=== Valeur par defaut
[source,kotlin,subs="quotes"]
----
fun read(b: Array<Byte>, off: Int = 0, len: Int = b.size) {
...
}
----

=== Break label
[source,kotlin,subs="quotes"]
----
loop@ for (i in 1..100) {
    for (j in 1..100) {
        if (...) break@loop
    }
}
----

=== return label
[source,kotlin,subs="quotes"]
----
fun foo() {
    listOf(1, 2, 3, 4, 5).forEach {
        if (it == 3) return // non-local return directly to the caller of foo()
        print(it)
    }
    println("this point is unreachable")
}

fun foo() {
    listOf(1, 2, 3, 4, 5).forEach lit@{
        if (it == 3) return@lit
        print(it)
    }
    print(" done with explicit label")
}
----

=== return as Label
[source,kotlin,subs="quotes"]
----
people.copy(age = 32)
----


=== If

[source,kotlin,subs="quotes"]
----
val max = if (a > b) {
  print("Choose a")
  a
} else {
  print("Choose b")
  b
}
----

=== when
[source,kotlin,subs="quotes"]
----
when (x) {
  1 -> print("x == 1")
  2 -> print("x == 2")
  3, 4 -> print("x == 3 or 4")
  else -> { // Note the block
    print("x is neither 1 nor 2")
  }
}
----

=== try catch
[source,kotlin,subs="quotes"]
----
val a: Int = try {
  parseInt(input)
}
catch (e: NumberFormatException) {
  42
}
----

=== Programmation fonctionnelle

[source,kotlin,subs="quotes"]
----
fun <T> lock(lock: Lock, body: () -> T): T {
  lock.lock()
  try {
      return body()
  }
  finally {
      lock.unlock()
  }
}
----

[NOTE.speaker]
--
Pas de Either par default / mais il existe Arrow
--

=== Coroutine

[source,kotlin,subs="quotes"]
----
val c = AtomicInteger()

for (i in 1..1_000_000)
  thread(start = true) {
    c.addAndGet(i)
  }

println(c.get())
----

[NOTE.speaker]
--
Thread / Async / Il existe aussi RxKotlin
--

=== extensions
[source,kotlin,subs="quotes"]
----
class Hero {
  fun useSuperpowers() {
    println("Applied super powers")
  }
}

fun Hero.savePlanet() {
  useSuperpowers()
}

val superman = Hero()
superman.savePlanet()
----

[NOTE.speaker]
--

C#

--

=== Kotlin Standard Library

[source,kotlin,subs="quotes"]
----
"test".isNotBlank()
----

=== Companion

[source, kotlin]
----
class User private constructor(val login: String) {
    companion object UserFactory {
        fun create(login: String): User {
            return User(login)
        }
    }
}
----

== KOTLIN IN THE REAL WORLD

=== JAVA ET KOTLIN

[NOTE.speaker]
--

On peut aussi utiliser l'h√©ritage, les impl√©mentations, ... tout ce qu'il y a dans Java

Hebergement facile

Ce qui vient de Java est nullable

Les types primitifs sont des objets

--

== KOTLIN ET LES FRAMEWORKS

* Spring Boot + JUnit 5
* jackson-kotlin
* kTor
* Javalin
* Kotlin arrow
* Jhipster-kotlin

== KOTLIN MULTIPLATEFORME

* JVM
* JS
* Natif

== THANKS

Any Question ?
